.ai-fab {
    position: fixed; bottom: 25px; right: 25px; width: 60px; height: 60px;
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    color: white; font-size: 24px; cursor: pointer;
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4); z-index: 9999;
    transition: transform 0.2s, box-shadow 0.2s;
}
.ai-fab:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5); }

.ai-chat-window {
    position: fixed; bottom: 95px; right: 25px; width: 340px; height: 480px;
    background: white; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.15);
    display: flex; flex-direction: column; overflow: hidden; z-index: 9998;
    border: 1px solid #e5e7eb; animation: slideUp 0.3s ease-out;
}

.ai-header {
    background: linear-gradient(135deg, #6366f1, #8b5cf6); padding: 16px; color: white;
}

.ai-messages {
    flex: 1; padding: 15px; overflow-y: auto; background: #f8fafc;
    display: flex; flex-direction: column; gap: 12px;
}

.message-bubble {
    max-width: 85%; padding: 10px 14px; border-radius: 14px; font-size: 14px; line-height: 1.5; word-wrap: break-word;
}
.message-bubble.bot {
    background: white; color: #374151; border: 1px solid #e5e7eb; align-self: flex-start; border-bottom-left-radius: 2px;
}
.message-bubble.user {
    background: #6366f1; color: white; align-self: flex-end; border-bottom-right-radius: 2px;
}

.ai-input-area {
    padding: 12px; background: white; border-top: 1px solid #e5e7eb; display: flex; gap: 10px;
}
.ai-input-area input {
    flex: 1; padding: 10px 14px; border: 1px solid #e5e7eb; border-radius: 24px; outline: none; font-size: 14px;
}
.ai-input-area button {
    width: 40px; height: 40px; background: #6366f1; color: white; border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;
}

.typing-dot {
    width: 6px; height: 6px; background: #9ca3af; border-radius: 50%; display: inline-block; margin: 0 2px; animation: bounce 1.4s infinite ease-in-out both;
}
.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

@media (max-width: 480px) {
    .ai-chat-window { width: 100%; height: 100%; bottom: 0; right: 0; border-radius: 0; }
    .ai-fab { bottom: 20px; right: 20px; }
}
/* --- Mobile Fixes --- */
@media (max-width: 480px) {
    .ai-chat-window {
        width: 100%;
        height: 100%;
        bottom: 0;
        right: 0;
        border-radius: 0;
        z-index: 10000; /* Ensure chat is on top */
    }

    /* When chat is OPEN on mobile, move the button to the top */
    .ai-fab.open {
        bottom: auto;    /* Unstick from bottom */
        top: 15px;       /* Stick to top */
        right: 15px;
        width: 40px;     /* Make it smaller */
        height: 40px;
        font-size: 18px;
        background: rgba(0, 0, 0, 0.3); /* Semi-transparent */
        box-shadow: none;
    }
    
    /* Adjust header text so it doesn't hit the button */
    .ai-header {
        padding-right: 60px; 
    }
}